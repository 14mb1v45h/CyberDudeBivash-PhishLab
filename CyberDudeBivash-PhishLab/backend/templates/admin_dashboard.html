<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>CyberDudeBivash PhishLab – Dashboard</title>
    <style>
      body {
        font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
        background: #020617;
        color: #e5e7eb;
        margin: 0;
        padding: 0;
      }
      header {
        background: linear-gradient(90deg, #0f172a, #1d4ed8);
        padding: 1rem 2rem;
        display: flex;
        justify-content: space-between;
        align-items: center;
        box-shadow: 0 1px 8px rgba(0,0,0,0.6);
      }
      header h1 {
        margin: 0;
        font-size: 1.4rem;
      }
      header span {
        font-size: 0.9rem;
        color: #cbd5f5;
      }
      main {
        padding: 1.5rem 2rem;
      }
      h2 {
        font-size: 1.2rem;
        margin-bottom: 0.5rem;
      }
      table {
        width: 100%;
        border-collapse: collapse;
        margin-top: 1rem;
        background: #020617;
        border-radius: 0.75rem;
        overflow: hidden;
        box-shadow: 0 0 20px rgba(15,23,42,0.8);
      }
      th, td {
        padding: 0.75rem 0.9rem;
        font-size: 0.9rem;
        text-align: left;
        border-bottom: 1px solid #1f2937;
      }
      th {
        background: #0b1120;
        color: #9ca3af;
        text-transform: uppercase;
        font-size: 0.75rem;
        letter-spacing: 0.06em;
      }
      tr:nth-child(even) {
        background: #020617;
      }
      tr:nth-child(odd) {
        background: #020617;
      }
      tr:hover {
        background: #111827;
      }
      .badge {
        display: inline-block;
        padding: 0.15rem 0.5rem;
        border-radius: 999px;
        font-size: 0.7rem;
        text-transform: uppercase;
      }
      .badge-live {
        background: rgba(34,197,94,0.15);
        color: #4ade80;
      }
      .stats {
        display: flex;
        gap: 1rem;
        margin-top: 1rem;
        flex-wrap: wrap;
      }
      .stat-card {
        background: #020617;
        border-radius: 0.75rem;
        padding: 0.9rem 1rem;
        min-width: 160px;
        box-shadow: 0 0 12px rgba(15,23,42,0.8);
      }
      .stat-label {
        font-size: 0.7rem;
        text-transform: uppercase;
        color: #9ca3af;
        letter-spacing: 0.05em;
      }
      .stat-value {
        font-size: 1.1rem;
        margin-top: 0.2rem;
      }
      .stat-sub {
        font-size: 0.75rem;
        color: #9ca3af;
      }
      .footer {
        margin-top: 2rem;
        font-size: 0.7rem;
        color: #6b7280;
        text-align: center;
      }
    </style>
  </head>
  <body>
    <header>
      <div>
        <h1>CyberDudeBivash Phishing Simulation Lab</h1>
        <span>Red-Team Awareness Dashboard</span>
      </div>
      <div>
        <span class="badge badge-live">Internal • Training Only</span>
      </div>
    </header>

    <main>
      <h2>Campaign Overview</h2>
      <p style="font-size:0.85rem; color:#9ca3af;">
        Each campaign shows how many targets were involved, who clicked, and who went as far as submitting
        data in the simulation. No real credentials are ever stored.
      </p>

      <table>
        <thead>
          <tr>
            <th>ID</th>
            <th>Campaign</th>
            <th>Created</th>
            <th>Total Targets</th>
            <th>Clicked</th>
            <th>Submitted</th>
            <th>Reported</th>
          </tr>
        </thead>
        <tbody>
          {% if campaigns %}
            {% for c in campaigns %}
            <tr>
              <td>{{ c.id }}</td>
              <td>{{ c.name }}</td>
              <td>{{ c.created_at.strftime("%Y-%m-%d %H:%M") }}</td>
              <td>{{ c.total }}</td>
              <td>{{ c.clicked }}</td>
              <td>{{ c.submitted }}</td>
              <td>{{ c.reported }}</td>
            </tr>
            {% endfor %}
          {% else %}
            <tr>
              <td colspan="7" style="text-align:center; padding:1.5rem; color:#6b7280;">
                No campaigns yet. Use the /admin API to create one and add targets.
              </td>
            </tr>
          {% endif %}
        </tbody>
      </table>

      {% if campaigns %}
      <div class="stats">
        <div class="stat-card">
          <div class="stat-label">Campaigns</div>
          <div class="stat-value">{{ campaigns|length }}</div>
          <div class="stat-sub">Total active + historical</div>
        </div>
        <div class="stat-card">
          <div class="stat-label">Total Targets (All Campaigns)</div>
          <div class="stat-value">
            {{ campaigns | sum(attribute="total") }}
          </div>
          <div class="stat-sub">Across all awareness waves</div>
        </div>
        <div class="stat-card">
          <div class="stat-label">Total Clicked</div>
          <div class="stat-value">
            {{ campaigns | sum(attribute="clicked") }}
          </div>
          <div class="stat-sub">Users who clicked training link</div>
        </div>
        <div class="stat-card">
          <div class="stat-label">Total Submitted</div>
          <div class="stat-value">
            {{ campaigns | sum(attribute="submitted") }}
          </div>
          <div class="stat-sub">Users who went to form submission</div>
        </div>
      </div>
      {% endif %}

      <div class="footer">
        CyberDudeBivash Phishing Simulation Lab • Internal Red-Team Training Tool • cyberdudebivash.com
      </div>
    </main>
  </body>
</html>
